var modalLink=document.querySelector(".button-for-modal"),modal=document.querySelector(".modal"),modalWindow=document.querySelector(".modal section"),modalForm=modal.querySelector("form"),messageName=modalForm.querySelector("input[name=name]"),messageEmail=modalForm.querySelector("input[name=e-mail]"),messageText=modalForm.querySelector("textarea"),modalClose=modal.querySelector(".button-close"),localMessageName=localStorage.getItem("messageName"),localMessageEmail=localStorage.getItem("messageEmail");modalLink.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-on"),localMessageName?messageName.value=localMessageName:messageName.focus(),localMessageEmail&&(messageEmail.value=localMessageEmail,messageText.focus())}),modalClose.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-on"),modalWindow.classList.remove("modal-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&modal.classList.contains("modal-on")&&(modal.classList.remove("modal-on"),modalWindow.classList.remove("modal-error"))}),modalForm.addEventListener("submit",function(e){messageName.value&&messageEmail.value&&messageText.value?(localStorage.setItem("messageName",messageName.value),localStorage.setItem("messageEmail",messageEmail.value)):(e.preventDefault(),modalWindow.classList.remove("modal-error"),modalWindow.offsetWidth=modalWindow.offsetWidth,modalWindow.classList.add("modal-error"))});
